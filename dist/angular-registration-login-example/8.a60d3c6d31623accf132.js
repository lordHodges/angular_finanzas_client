(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{iHCk:function(e,t,i){"use strict";i.r(t),i.d(t,"IngresosModule",(function(){return V}));var o=i("ofXK"),s=i("3Pt+"),r=i("tyNb"),n=i("SxV6"),a=i("fXoL"),l=i("J9tS");let c=(()=>{class e{constructor(e,t,i){this.route=e,this.router=t,this.empresaService=i,this.empresas=null}ngOnInit(){this.empresaService.getAll().pipe(Object(n.a)()).subscribe(e=>this.empresas=e),this.idEmpresa=this.route.snapshot.params.idEmpresa,this.statics=!this.idEmpresa,"1"==this.idEmpresa&&this.router.navigate([`/ingresos/${this.idEmpresa}/hostal/${this.idEmpresa}`]),"2"==this.idEmpresa&&this.router.navigate([`/ingresos/${this.idEmpresa}/abogados/${this.idEmpresa}`]),"5"==this.idEmpresa&&this.router.navigate(["/empresas",{relativeTo:this.route}])}}return e.\u0275fac=function(t){return new(t||e)(a.Ib(r.a),a.Ib(r.c),a.Ib(l.d))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,t){1&e&&(a.Lb(0,"div",0),a.Lb(1,"div",1),a.Jb(2,"router-outlet"),a.Kb(),a.Kb())},directives:[r.h],styles:[""]}),e})();var b=i("nPby"),d=i("7pIB");function u(e,t){if(1&e&&(a.Lb(0,"td",24),a.lc(1),a.Vb(2,"number"),a.Kb()),2&e){const e=a.Ub().$implicit;a.xb(1),a.nc(" ",a.Xb(2,1,(null==e||null==e.file?null:e.file.size)/1024/1024,".2")," MB ")}}const p=function(e){return{width:e}};function h(e,t){if(1&e&&(a.Lb(0,"td"),a.Lb(1,"div",28),a.Jb(2,"div",9),a.Kb(),a.Kb()),2&e){const e=a.Ub().$implicit;a.xb(2),a.ac("ngStyle",a.ec(1,p,e.progress+"%"))}}function m(e,t){1&e&&(a.Lb(0,"span"),a.Jb(1,"i",29),a.Kb())}function g(e,t){1&e&&(a.Lb(0,"span"),a.Jb(1,"i",13),a.Kb())}function f(e,t){1&e&&(a.Lb(0,"span"),a.Jb(1,"i",30),a.Kb())}function v(e,t){if(1&e&&(a.Lb(0,"tr"),a.Lb(1,"td"),a.Lb(2,"strong"),a.lc(3),a.Kb(),a.Kb(),a.kc(4,u,3,4,"td",21),a.kc(5,h,3,3,"td",22),a.Lb(6,"td",23),a.kc(7,m,2,0,"span",22),a.kc(8,g,2,0,"span",22),a.kc(9,f,2,0,"span",22),a.Kb(),a.Lb(10,"td",24),a.Lb(11,"button",25),a.Sb("click",(function(){return t.$implicit.upload()})),a.Jb(12,"span",11),a.lc(13," Subir "),a.Kb(),a.Lb(14,"button",26),a.Sb("click",(function(){return t.$implicit.cancel()})),a.Jb(15,"span",13),a.lc(16," Cancelar "),a.Kb(),a.Lb(17,"button",27),a.Sb("click",(function(){return t.$implicit.remove()})),a.Jb(18,"span",15),a.lc(19," Quitar "),a.Kb(),a.Kb(),a.Kb()),2&e){const e=t.$implicit,i=a.Ub();a.xb(3),a.mc(null==e||null==e.file?null:e.file.name),a.xb(1),a.ac("ngIf",i.uploader.options.isHTML5),a.xb(1),a.ac("ngIf",i.uploader.options.isHTML5),a.xb(2),a.ac("ngIf",e.isSuccess),a.xb(1),a.ac("ngIf",e.isCancel),a.xb(1),a.ac("ngIf",e.isError),a.xb(2),a.ac("disabled",e.isReady||e.isUploading||e.isSuccess),a.xb(3),a.ac("disabled",!e.isUploading)}}function L(e,t){if(1&e){const e=a.Mb();a.Lb(0,"button",31),a.Sb("click",(function(){a.gc(e);const i=t.$implicit;return a.Ub().decargar(i)})),a.lc(1),a.Kb()}if(2&e){const e=t.$implicit;a.xb(1),a.nc(" ",e," ")}}const K=function(e){return{"nv-file-over":e}};let S=(()=>{class e{constructor(e){this.service=e,this.listo=new a.n,this.respuesta=new a.n,this.uris=[],this.uploader=new d.d({url:"http://localhost:3000/api/ingresoHostal/upload",itemAlias:"photo"}),this.hasBaseDropZoneOver=!1,this.hasAnotherDropZoneOver=!1,this.uploader.onCompleteItem=(e,t,i,o)=>{console.log("ImageUpload:uploaded:",e.alias,i,t),this.uris.push(t)},this.uploader.onCompleteAll=()=>{this.response=this.uris,alert("Archivos exitosamente subidos:"+this.response.length+" registros"),this.listo.emit(!1),this.respuesta.emit(this.response)}}decargar(e){this.service.getFiles(e)}ngOnInit(){}fileOverBase(e){this.hasBaseDropZoneOver=e}fileOverAnother(e){this.hasAnotherDropZoneOver=e}}return e.\u0275fac=function(t){return new(t||e)(a.Ib(l.f))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-respaldos"]],outputs:{listo:"listo",respuesta:"respuesta"},decls:53,vars:14,consts:[[1,"row"],[1,"col"],["ng2FileDrop","",1,"my-drop-zone",3,"ngClass","uploader","fileOver"],["type","file","ng2FileSelect","","multiple","",3,"uploader"],[1,"col",2,"margin-bottom","40px"],[1,"table"],["width","50%"],[4,"ngFor","ngForOf"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"],["type","button",1,"btn","btn-success","btn-s","ml-2",3,"disabled","click"],[1,"glyphicon","glyphicon-upload"],["type","button",1,"btn","btn-warning","btn-s","ml-2",3,"disabled","click"],[1,"glyphicon","glyphicon-ban-circle"],["type","button",1,"btn","btn-danger","btn-s","ml-2",3,"disabled","click"],[1,"glyphicon","glyphicon-trash"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],["class","btn btn-cyan",3,"click",4,"ngFor","ngForOf"],["nowrap","",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["nowrap",""],["type","button",1,"btn","btn-success","btn-xs",3,"disabled","click"],["type","button",1,"btn","btn-warning","btn-xs","ml-2",3,"disabled","click"],["type","button",1,"btn","btn-danger","btn-xs","ml-2",3,"click"],[1,"progress",2,"margin-bottom","0"],[1,"glyphicon","glyphicon-ok"],[1,"glyphicon","glyphicon-remove"],[1,"btn","btn-cyan",3,"click"]],template:function(e,t){1&e&&(a.Lb(0,"h5"),a.lc(1,"DOCUMENTOS"),a.Kb(),a.Lb(2,"div",0),a.Lb(3,"div",1),a.Lb(4,"h5"),a.lc(5,"Seleccionar Documentos"),a.Kb(),a.Lb(6,"div",2),a.Sb("fileOver",(function(e){return t.fileOverBase(e)})),a.lc(7," Arrastrar aqui "),a.Kb(),a.Jb(8,"input",3),a.Jb(9,"br"),a.Kb(),a.Lb(10,"div",4),a.Lb(11,"h5"),a.lc(12,"Documentos Preparados"),a.Kb(),a.Lb(13,"p"),a.lc(14),a.Kb(),a.Lb(15,"table",5),a.Lb(16,"thead"),a.Lb(17,"tr"),a.Lb(18,"th",6),a.lc(19,"Nombre"),a.Kb(),a.Lb(20,"th"),a.lc(21,"Tama\xf1o"),a.Kb(),a.Lb(22,"th"),a.lc(23,"Progreso"),a.Kb(),a.Lb(24,"th"),a.lc(25,"Status"),a.Kb(),a.Lb(26,"th"),a.lc(27,"Acciones"),a.Kb(),a.Kb(),a.Kb(),a.Lb(28,"tbody"),a.kc(29,v,20,8,"tr",7),a.Kb(),a.Kb(),a.Lb(30,"div"),a.Lb(31,"div"),a.lc(32," Progreso Cola: "),a.Lb(33,"div",8),a.Jb(34,"div",9),a.Kb(),a.Kb(),a.Lb(35,"button",10),a.Sb("click",(function(){return t.uploader.uploadAll()})),a.Jb(36,"span",11),a.lc(37," Subir Todos "),a.Kb(),a.Lb(38,"button",12),a.Sb("click",(function(){return t.uploader.cancelAll()})),a.Jb(39,"span",13),a.lc(40," Cancelar Todos "),a.Kb(),a.Lb(41,"button",14),a.Sb("click",(function(){return t.uploader.clearQueue()})),a.Jb(42,"span",15),a.lc(43," Quitar Todos "),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Jb(44,"br"),a.Jb(45,"br"),a.Lb(46,"div",0),a.Lb(47,"div",16),a.Lb(48,"div",17),a.Lb(49,"div",18),a.lc(50,"Archivos"),a.Kb(),a.Lb(51,"div",19),a.kc(52,L,2,1,"button",20),a.Kb(),a.Kb(),a.Kb(),a.Kb()),2&e&&(a.xb(6),a.ac("ngClass",a.ec(10,K,t.hasBaseDropZoneOver))("uploader",t.uploader),a.xb(2),a.ac("uploader",t.uploader),a.xb(6),a.nc("Archivos en cola: ",null==t.uploader||null==t.uploader.queue?null:t.uploader.queue.length,""),a.xb(15),a.ac("ngForOf",t.uploader.queue),a.xb(5),a.ac("ngStyle",a.ec(12,p,t.uploader.progress+"%")),a.xb(1),a.ac("disabled",!t.uploader.getNotUploadedItems().length),a.xb(3),a.ac("disabled",!t.uploader.isUploading),a.xb(3),a.ac("disabled",!t.uploader.queue.length),a.xb(11),a.ac("ngForOf",t.response))},directives:[d.a,o.k,d.b,o.l,o.n,o.m],pipes:[o.f],styles:["",".my-drop-zone[_ngcontent-%COMP%] {\n    border: dotted 3px lightgray;\n    height: 100px;\n  }\n  .nv-file-over[_ngcontent-%COMP%] {\n    border: dotted 3px red;\n  } \n  .another-file-over-class[_ngcontent-%COMP%] {\n    border: dotted 3px green;\n  }\n\n  html[_ngcontent-%COMP%], body[_ngcontent-%COMP%] {\n    height: 100%;\n  }"]}),e})();function w(e,t){if(1&e&&(a.Lb(0,"h5"),a.lc(1),a.Kb()),2&e){const e=a.Ub();a.xb(1),a.nc("Agregar Ingresos ",e.empresa.razonSocial,"")}}function y(e,t){if(1&e&&(a.Lb(0,"h5"),a.lc(1),a.Kb()),2&e){const e=a.Ub();a.xb(1),a.nc("Editar Ingresos ",e.empresa.razonSocial,"")}}function x(e,t){if(1&e&&(a.Lb(0,"option",37),a.lc(1),a.Kb()),2&e){const e=t.$implicit;a.bc("value",e.id),a.xb(1),a.nc(" ",e.razonSocial," ")}}function C(e,t){1&e&&(a.Lb(0,"div"),a.lc(1,"este campo es requerido"),a.Kb())}function I(e,t){if(1&e&&(a.Lb(0,"div",38),a.kc(1,C,2,0,"div",2),a.Kb()),2&e){const e=a.Ub();a.xb(1),a.ac("ngIf",e.f.fecha.errors.required)}}function k(e,t){1&e&&(a.Lb(0,"div"),a.lc(1,"este campo es requerido"),a.Kb())}function O(e,t){if(1&e&&(a.Lb(0,"div",38),a.kc(1,k,2,0,"div",2),a.Kb()),2&e){const e=a.Ub();a.xb(1),a.ac("ngIf",e.f.monto.errors.required)}}function A(e,t){1&e&&(a.Lb(0,"div"),a.lc(1,"este campo es requerido"),a.Kb())}function E(e,t){if(1&e&&(a.Lb(0,"div",38),a.kc(1,A,2,0,"div",2),a.Kb()),2&e){const e=a.Ub();a.xb(1),a.ac("ngIf",e.f.cliente.errors.required)}}function P(e,t){1&e&&a.Jb(0,"span",39)}const R=function(e){return{"is-invalid":e}};let M=(()=>{class e{constructor(e,t,i,o,s,r,n){this.formBuilder=e,this.route=t,this.router=i,this.empresaService=o,this.alertService=s,this.ingresoService=r,this.accountService=n,this.empresas=null,this.empresa=new b.d,this.sucursales=null,this.idEmpresa=null,this.submitted=!1,this.loading=!0,this.idUsuario=null,this.ingreso=new b.e,this.usuario=this.accountService.userValue,this.idUsuario=this.usuario.id}envv(e){this.loading=e}resp(e){this.respuesta=e}ngOnInit(){this.idEmpresa=this.route.snapshot.params.idEmpresa,this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.empresaService.getAll().pipe(Object(n.a)()).subscribe(e=>{for(let t=0;t<e.length;t++)e[t].Sucursals=Object.values(e[t].Sucursals);this.empresas=e}),this.empresaService.getByIdWithSucursales(this.idEmpresa).pipe(Object(n.a)()).subscribe(e=>{e.Sucursals=Object.values(e.Sucursals),this.empresa=e}),this.form=this.formBuilder.group({fecha:["",s.m.required],monto:["",s.m.required],tipoIngreso:["",s.m.required],cliente:["",s.m.required],tipoCliente:["",s.m.required],tipoPago:["",s.m.required],idSucursal:["",s.m.required],idUsuario:this.idUsuario}),this.isAddMode||(this.form=this.formBuilder.group({fecha:[],monto:[],tipoIngreso:[],cliente:[],tipoCliente:[],tipoPago:[],idSucursal:[],idUsuario:this.idUsuario}),this.ingresoService.getById(this.id).pipe(Object(n.a)()).subscribe(e=>{this.f.fecha.setValue(e.fecha),this.f.monto.setValue(e.monto),this.f.tipoIngreso.setValue(e.tipoIngreso),this.f.cliente.setValue(e.cliente),this.f.tipoCliente.setValue(e.tipoCliente),this.f.tipoPago.setValue(e.tipoPago),this.f.idSucursal.setValue(e.idSucursal),this.f.idUsuario.setValue(this.idUsuario)}))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createIngreso():this.updateIngreso())}createIngreso(){console.log(this.respuesta),this.ingreso.RespaldoIngresos=[],this.ingreso.fecha=this.form.value.fecha,this.ingreso.monto=this.form.value.monto,this.ingreso.tipoPago=this.form.value.descripcion,this.ingreso.cliente=this.form.value.cliente,this.ingreso.idSucursal=this.form.value.idSucursal,this.ingreso.idUsuario=this.form.value.idUsuario;let e="";for(let t=0;t<this.form.value.tipoIngreso.length;t++)e=e+" "+this.form.value.tipoIngreso[t];for(let t=0;t<this.respuesta.length;t++)this.ingreso.RespaldoIngresos.push({url:this.respuesta[t]});this.ingreso.tipoIngreso=e,this.ingresoService.create(this.ingreso).pipe(Object(n.a)()).subscribe(e=>{this.alertService.success("Sucursal creado con exito",{keepAfterRouteChange:!0}),this.loading=!1,this.router.navigate(["",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}updateIngreso(){this.ingresoService.update(this.id,this.form.value).pipe(Object(n.a)()).subscribe(e=>{this.alertService.success("Sucursal editado con Exito",{keepAfterRouteChange:!0}),this.router.navigate(["..",{relativeTo:this.route}])},e=>{this.alertService.error(e),this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.Ib(s.b),a.Ib(r.a),a.Ib(r.c),a.Ib(l.d),a.Ib(l.b),a.Ib(l.f),a.Ib(l.a))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-hostal-form"]],decls:77,vars:31,consts:[[1,"card"],[1,"card-header"],[4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["for","idSucursal"],["name","idSucursal","id","idSucursal","formControlName","idSucursal",1,"form-control",3,"ngClass"],["default",""],[3,"value",4,"ngFor","ngForOf"],["for","tipoIngreso"],["multiple","","name","tipoIngreso","id","tipoIngreso","formControlName","tipoIngreso",1,"form-control",3,"ngClass"],["value",""],["value","Alojamiento"],["value","Desayuno"],["value","Almuerzo"],["value","Cena"],["for","fecha"],["type","date","formControlName","fecha",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","monto"],["type","number","formControlName","monto",1,"form-control",3,"value","ngClass"],["for","cliente"],["type","text","formControlName","cliente",1,"form-control",3,"ngClass"],["for","tipoCliente"],["name","tipoCliente","id","tipoCliente","formControlName","tipoCliente",1,"form-control",3,"ngClass"],["value","1"],["value","2"],["for","tipoPago"],["name","tipoPago","id","tipoPago","formControlName","tipoPago",1,"form-control",3,"ngClass"],["value","3"],[3,"listo","respuesta"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/ingresos",1,"btn","btn-link"],[3,"value"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,t){1&e&&(a.Lb(0,"div",0),a.Lb(1,"div",1),a.kc(2,w,2,1,"h5",2),a.kc(3,y,2,1,"h5",2),a.Kb(),a.Lb(4,"div",3),a.Lb(5,"form",4),a.Sb("ngSubmit",(function(){return t.onSubmit()})),a.Lb(6,"div",5),a.Lb(7,"div",6),a.Lb(8,"label",7),a.lc(9,"Sucursal"),a.Kb(),a.Lb(10,"select",8),a.Lb(11,"option",9),a.lc(12,"Seleccionar"),a.Kb(),a.kc(13,x,2,2,"option",10),a.Kb(),a.Kb(),a.Lb(14,"div",6),a.Lb(15,"label",11),a.lc(16,"Tipo Ingreso"),a.Kb(),a.Lb(17,"select",12),a.Lb(18,"option",13),a.lc(19,"Seleccionar"),a.Kb(),a.Lb(20,"option",14),a.lc(21,"Alojamiento"),a.Kb(),a.Lb(22,"option",15),a.lc(23,"Desayuno"),a.Kb(),a.Lb(24,"option",16),a.lc(25,"Almuerzo"),a.Kb(),a.Lb(26,"option",17),a.lc(27,"Cena"),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Lb(28,"div",5),a.Lb(29,"div",6),a.Lb(30,"label",18),a.lc(31,"Fecha"),a.Kb(),a.Jb(32,"input",19),a.kc(33,I,2,1,"div",20),a.Kb(),a.Lb(34,"div",6),a.Lb(35,"label",21),a.lc(36,"Monto"),a.Kb(),a.Jb(37,"input",22),a.kc(38,O,2,1,"div",20),a.Kb(),a.Kb(),a.Lb(39,"div",5),a.Lb(40,"div",6),a.Lb(41,"label",23),a.lc(42,"Cliente"),a.Kb(),a.Jb(43,"input",24),a.kc(44,E,2,1,"div",20),a.Kb(),a.Lb(45,"div",6),a.Lb(46,"label",25),a.lc(47,"Tipo Cliente"),a.Kb(),a.Lb(48,"select",26),a.Lb(49,"option",13),a.lc(50,"Seleccionar"),a.Kb(),a.Lb(51,"option",27),a.lc(52,"Particular"),a.Kb(),a.Lb(53,"option",28),a.lc(54,"Empresa"),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Lb(55,"div",5),a.Lb(56,"div",6),a.Lb(57,"label",29),a.lc(58,"Tipo Pago"),a.Kb(),a.Lb(59,"select",30),a.Lb(60,"option",13),a.lc(61,"Seleccionar"),a.Kb(),a.Lb(62,"option",27),a.lc(63,"Efectivo"),a.Kb(),a.Lb(64,"option",28),a.lc(65,"TransBank"),a.Kb(),a.Lb(66,"option",31),a.lc(67,"Transferencia"),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Lb(68,"div",5),a.Lb(69,"app-respaldos",32),a.Sb("listo",(function(e){return t.envv(e)}))("respuesta",(function(e){return t.resp(e)})),a.Kb(),a.Kb(),a.Lb(70,"div",5),a.Lb(71,"div",33),a.Lb(72,"button",34),a.kc(73,P,1,0,"span",35),a.lc(74," Guardar "),a.Kb(),a.Lb(75,"a",36),a.lc(76,"Cancelar"),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Kb()),2&e&&(a.xb(2),a.ac("ngIf",t.isAddMode),a.xb(1),a.ac("ngIf",!t.isAddMode),a.xb(2),a.ac("formGroup",t.form),a.xb(5),a.ac("ngClass",a.ec(17,R,t.submitted&&t.f.idSucursal.errors)),a.xb(3),a.ac("ngForOf",t.empresa.Sucursals),a.xb(4),a.ac("ngClass",a.ec(19,R,t.submitted&&t.f.tipoIngreso.errors)),a.xb(15),a.ac("ngClass",a.ec(21,R,t.submitted&&t.f.fecha.errors)),a.xb(1),a.ac("ngIf",t.submitted&&t.f.fecha.errors),a.xb(4),a.bc("value",t.f.monto),a.ac("ngClass",a.ec(23,R,t.submitted&&t.f.monto.errors)),a.xb(1),a.ac("ngIf",t.submitted&&t.f.monto.errors),a.xb(5),a.ac("ngClass",a.ec(25,R,t.submitted&&t.f.cliente.errors)),a.xb(1),a.ac("ngIf",t.submitted&&t.f.cliente.errors),a.xb(4),a.ac("ngClass",a.ec(27,R,t.submitted&&t.f.tipoCliente.errors)),a.xb(11),a.ac("ngClass",a.ec(29,R,t.submitted&&t.f.tipoPago.errors)),a.xb(13),a.ac("disabled",t.loading),a.xb(1),a.ac("ngIf",t.loading))},directives:[o.m,s.o,s.g,s.d,s.k,s.f,s.c,o.k,s.h,s.n,o.l,s.l,s.a,s.i,S,r.f],styles:[""]}),e})(),U=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Cb({type:e,selectors:[["app-firma-abogados-form"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Lb(0,"p"),a.lc(1,"firma-abogados-form works!"),a.Kb())},styles:[""]}),e})();var j=i("mrSG"),D=i("cWTo");let J=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},imports:[[o.c,D.b.withComponents([])]]}),e})(),G=(()=>{class e{constructor(){this.modals=[]}add(e){this.modals.push(e)}remove(e){this.modals=this.modals.filter(t=>t.id!==e)}open(e,t){this.modals.find(t=>t.id===e).open(t)}close(e){this.modals.find(t=>t.id===e).close()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const F=["agGrid2"],_=["*"];let q=(()=>{class e{constructor(e,t,i){this.service=e,this.modalService=t,this.el=i,this.columnDefs2=[{headerName:"Archivo",field:"url",sortable:!0,filter:!0,checkboxSelection:!1}],this.element=i.nativeElement}ngOnInit(){this.id?(document.body.appendChild(this.element),this.element.addEventListener("click",e=>{"jw-modal"===e.target.className&&this.close()}),this.modalService.add(this)):console.error("modal must have an id")}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,e.api.expandAll()}ngOnDestroy(){this.modalService.remove(this.id),this.element.remove()}onSelectionChanged(){var e=this.gridApi.getSelectedRows();this.service.getFiles(e[0].url)}open(e){this.service.getById(e).subscribe(e=>{this.rowData=e[0].RespaldoIngresos}),this.element.style.display="block",document.body.classList.add("jw-modal-open")}close(){this.element.style.display="none",document.body.classList.remove("jw-modal-open")}}return e.\u0275fac=function(t){return new(t||e)(a.Ib(l.f),a.Ib(G),a.Ib(a.l))},e.\u0275cmp=a.Cb({type:e,selectors:[["jw-modal"]],viewQuery:function(e,t){var i;1&e&&a.oc(F,!0),2&e&&a.fc(i=a.Tb())&&(t.agGrid2=i.first)},inputs:{id:"id",row:"row"},ngContentSelectors:_,decls:6,vars:3,consts:[[1,"jw-modal","slidein"],[1,"jw-modal-body"],["id","agGrid2","rowSelection","multiple",1,"ag-theme-material",2,"width","100%","height","500px",3,"rowData","columnDefs","animateRows","gridReady","selectionChanged"],["agGrid2",""],[1,"jw-modal-background"]],template:function(e,t){1&e&&(a.Zb(),a.Lb(0,"div",0),a.Lb(1,"div",1),a.Yb(2),a.Lb(3,"ag-grid-angular",2,3),a.Sb("gridReady",(function(e){return t.onGridReady(e)}))("selectionChanged",(function(){return t.onSelectionChanged()})),a.Kb(),a.Kb(),a.Kb(),a.Jb(5,"div",4)),2&e&&(a.xb(3),a.ac("rowData",t.rowData)("columnDefs",t.columnDefs2)("animateRows",!0))},directives:[D.a],styles:["jw-modal{display:none}jw-modal .slidein{animation-duration:2s;animation-name:slidein}@keyframes slidein{0%{margin-left:100%;width:0}to{margin-left:0;width:23%}}jw-modal .jw-modal{position:fixed;top:0;right:0;bottom:0;left:1;z-index:1000;overflow:auto}jw-modal .jw-modal .jw-modal-body{padding:20px;background:#fff;margin:40px}jw-modal .jw-modal-background{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#000;opacity:.75;z-index:900}body.jw-modal-open{overflow:hidden}"],encapsulation:2}),e})();const N=["agGrid"];function T(e,t){if(1&e){const e=a.Mb();a.Lb(0,"div",1),a.Lb(1,"button",7),a.Sb("click",(function(){return a.gc(e),a.Ub().getSelectedRows()})),a.lc(2),a.Vb(3,"currency"),a.Kb(),a.Lb(4,"button",8),a.Sb("click",(function(){return a.gc(e),a.Ub().exportAsXLSX()})),a.Jb(5,"i",9),a.lc(6," Exportar Datos "),a.Kb(),a.Lb(7,"button",10),a.Sb("click",(function(){return a.gc(e),a.Ub().deleteIngreso()})),a.Jb(8,"i",11),a.lc(9," Eliminar Datos "),a.Kb(),a.Lb(10,"button",12),a.Sb("click",(function(){return a.gc(e),a.Ub().detalleIngreso()})),a.Jb(11,"i",13),a.lc(12," explorar Datos "),a.Kb(),a.Lb(13,"jw-modal",14),a.Lb(14,"h1"),a.lc(15,"Respaldos"),a.Kb(),a.Lb(16,"button",15),a.Sb("click",(function(){return a.gc(e),a.Ub().closeModal("custom-modal-1")})),a.lc(17," Close "),a.Kb(),a.Kb(),a.Lb(18,"ag-grid-angular",16,17),a.Sb("gridReady",(function(t){return a.gc(e),a.Ub().onGridReady(t)})),a.Vb(20,"async"),a.Kb(),a.Kb()}if(2&e){const e=a.Ub();a.xb(2),a.nc(" Calcular Filtro: ",a.Xb(3,5,e.total,"CLP")," "),a.xb(11),a.ac("row",e.rowFind),a.xb(5),a.ac("rowData",a.Wb(20,8,e.rowData))("columnDefs",e.columnDefs)("animateRows",!0)}}const B=[{path:"",component:c},{path:":idEmpresa",component:c,children:[{path:"hostal/:idEmpresa",component:(()=>{class e{constructor(e,t,i,o){this.ingresoService=e,this.route=t,this.modalService=i,this.excelService=o,this.ingresos=null,this.idEmpresa=null,this.id=null,this.mostrarList=!0,this.total=0,this.columnDefs=[{headerName:"ID",field:"id",sortable:!0,filter:!0,checkboxSelection:!0},{field:"fecha",sortable:!0,filter:!0},{field:"monto",sortable:!0,filter:!0},{field:"cliente",sortable:!0,filter:!0},{field:"tipoIngreso",sortable:!0,filter:!0},{headerName:"Sucursal",field:"Sucursal.razonSocial",sortable:!0,filter:!0},{headerName:"Usuario",field:"Usuario.nombreUsuario",sortable:!0,filter:!0}]}ngOnInit(){this.idEmpresa=this.route.snapshot.params.idEmpresa,this.id=this.route.snapshot.params.id,this.ingresoService.getAllWithUsuario().pipe(Object(n.a)()).subscribe(e=>this.ingresos=e),this.rowData=this.ingresoService.getAll()}closeModal(e){this.modalService.close(e)}onGridReady(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi,e.api.expandAll()}getSelectedRows(){this.total=0,this.selectedRows=[],this.agGrid.api.getSelectedRows().forEach(e=>this.selectedRows.push(e)),this.selectedRows.forEach(e=>{this.total=this.total+Number(e.monto)})}exportAsXLSX(){this.selectedRows=[],this.agGrid.api.getSelectedRows().forEach(e=>this.selectedRows.push(e)),this.excelService.exportAsExcelFile(this.selectedRows,"sample")}mostrar(e){e.target.checked?(this.mostrarList=!0,this.ngOnInit()):(this.mostrarList=!1,this.ngOnInit())}deleteIngreso(e){const t=this.ingresos.find(t=>t.id===e);confirm("Esta seguro que desea eliminar el registro: ")&&(t.isDeleting=!0,this.ingresoService.delete(e).pipe(Object(n.a)()).subscribe(()=>{this.ingresos=this.ingresos.filter(t=>t.id!==e)}),t.isDeleting=!1)}detalleIngreso(){return Object(j.a)(this,void 0,void 0,(function*(){let e;this.selectedRows=[],yield this.agGrid.api.getSelectedRows().forEach(e=>this.selectedRows.push(e)),this.selectedRows.length<=1&&this.selectedRows.length>0?yield this.selectedRows.forEach(t=>{e=t.id,this.rowFind=e,this.modalService.open("custom-modal-1",e)}):alert(`Atencion: No es posible visualizar ${this.selectedRows.length} Registros`)}))}}return e.\u0275fac=function(t){return new(t||e)(a.Ib(l.f),a.Ib(r.a),a.Ib(G),a.Ib(l.e))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-hostal-list"]],viewQuery:function(e,t){var i;1&e&&a.oc(N,!0),2&e&&a.fc(i=a.Tb())&&(t.agGrid=i.first)},decls:13,vars:2,consts:[[1,"btn","btn-sm","btn-success","mb-2",3,"routerLink"],[1,"row"],[1,"switch"],["type","checkbox","checked","",3,"change"],[1,"slider","round"],[1,"col"],["class","row",4,"ngIf"],[1,"btn","btn-outline-success",3,"click"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-arrow-alt-circle-down"],["disabled","",1,"btn","btn-danger","ml-4","right-align",3,"click"],[1,"fa","fa-trash"],[1,"btn","btn-primary","ml-4","right-align",3,"click"],[1,"fa","fa-eye"],["id","custom-modal-1",3,"row"],[1,"btn","btn-danger",3,"click"],["id","agGrid","rowSelection","multiple",1,"ag-theme-material",2,"width","100%","height","500px",3,"rowData","columnDefs","animateRows","gridReady"],["agGrid",""]],template:function(e,t){1&e&&(a.Lb(0,"h4"),a.lc(1,"Ingresos Hostal"),a.Kb(),a.Lb(2,"a",0),a.lc(3,"Agregar ingresos"),a.Kb(),a.Jb(4,"router-outlet"),a.Jb(5,"br"),a.Lb(6,"div",1),a.Lb(7,"label",2),a.Lb(8,"input",3),a.Sb("change",(function(e){return t.mostrar(e)})),a.Kb(),a.Jb(9,"span",4),a.Kb(),a.Lb(10,"h5",5),a.lc(11,"Mostrar Listado"),a.Kb(),a.Kb(),a.kc(12,T,21,10,"div",6)),2&e&&(a.xb(2),a.cc("routerLink","add/",t.idEmpresa,""),a.xb(10),a.ac("ngIf",t.mostrarList))},directives:[r.f,r.h,o.m,q,D.a],pipes:[o.d,o.b],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:60px;height:34px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(26px)}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),e})(),children:[{path:"add/:idEmpresa",component:M},{path:"edit/:id/:idEmpresa",component:M}]},{path:"abogados/:idEmpresa",component:U}]}];let $=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(B)],r.g]}),e})(),V=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},providers:[l.e],imports:[[o.c,$,s.e,s.j,d.c,J,D.b]]}),e})()}}]);